<?xml version="1.0"?>
<map version="0.99b" orientation="orthogonal" width="128" height="128" tilewidth="32" tileheight="32">
 <properties>
  <property name="music" value="finalman_and_yakslem-cavesong.ogg"/>
  <property name="minimap" value="graphics/images/minimap_new_5-1.png"/>
 </properties>
 <tileset name="cave" firstgid="1" tilewidth="32" tileheight="32">
  <image source="../graphics/tiles/cave.png" trans="ff00ff"/>
 </tileset>
 <tileset name="collision" firstgid="129" tilewidth="32" tileheight="32">
  <image source="../graphics/tiles/collision.png" trans="000000"/>
 </tileset>
 <layer name="Ground" width="128" height="128">
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAAO2du67UOhRAUwAN0MCBBmh4Iy4NcHgUNMDh8QWAhICOi3h2gITuPZ+OtxgLE/zYzjiJE69iiTmjDIm8tp09Hm/nRNd1JwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADYcN1wYgWMTX+uVCtpyaVwynDPsGu5s2HV4ZnhueOG8d8fz2vfe2a5sDLjX6jvn3d6xoVghTn5z23DDsGd4smHP4a3hX8M7570nnte+9653ZWPAvVbfOc87jkMx3Y/v/jHu69LxWyOPDQ8MBwN8NXwzfDf8iBzn435XNgZORq5Vru2m4zQU0/347h/jvpZrd8eUNXIy4u99pu9UDGybN8SuVXjoOH1U6Np3KnA0tX8ZRy8q2seOt6ljbQxIv/SNx/0xOdTnUv7H4EAFjqb2L+PoLUXb2PFWc6zEQH989f0thPrctv4PG44oONq4fxlHNeOnHW9LjLUuY/k/ZTit4Ezj/ucG//ivxf/TChxN5V97f9TcN9fiv6X8X9s+mnbD/zJw2/Sq4R8F9/C/Goa0aagd+/7d3OnQBP53EufD/7T+Y20Xiwf8z+s/Nf9Xwn/M5Vj+tfe3a437T83/LdX/EFr0L/N6sd8EQ/3oWqdvO/zXQaxNc3/vzWk7/NfBmPN/S/e/9rlf/Lfd9/HfZp8vTaitl+Qf78MJeZnTP+Af2vUv6/8vZEBNwPL9+9b/a1n7Ou8W/PvW/2tZ+zqftfn3zU266/9j89fkDsv3Xxr8t+PfV9ckuQM54LL9D11vJEjuQA64bP87vWNfGV4b3iQ+J0juQA44j/9+LlfK/yfDZ8MXhX9ygPn8j9X/tf7fJ84L6/ZP//+T1H5AlzfYv0NrRfG/LKx3d++U3S6+R4oQWiuK/+Vw3PHu7p2y18X3SBFC9d/4XwZ2Xy3rvVQ9P/6Xgd1Xa6p9HPBfF49HcI//5dBv15x9AGI1/7X6D9U14P8XOfsAxGq+p/TfX78px/5n+N+wH/kc/v9uV22dpK/mayz/8v0kVpPa/0zo/4/taYj/dL8qUcc/xL/kqLGaVK1/+r/eRWxNfCoOUm2Z6z+Vo+K/vP9Ue4RiQFNLkeM/Nfbjfxz/siZmrP2vc/ynxn7fZ2RO67KS1tf9hFzImpix9kDX+rd9Pzb2+8YbiZldJaz78Y/l/b27S8aB1v+Qvi9IvrCnhHU/YR/u3t0l40DjX9P3Q/5z7v+t3veFS5t/Y/mV3bu7ZByk/NvfI1N9P8d/6Lt/y/7tfVLTzqE4GBILKf85v0nR/4dj75M5v/+4ceA+KycnDmJ+7P5z2mtK+U/tY9Sy/21qKiQO3GflSBxoc+nYeeV7h2Y88vmzdb+a55fgv1xNjR0TtG0ZO6/2+RM+fzn3M/yXr6kr4T8XuV+4/V7icGj8tIbGQ84+gHP4t3Xfkovk9Hv8r6P/27pvyUWGrGPC//T+c/KzscH/tG2pmdPF/zr9a+d08b8+/zlzuvhfl3/rfow6A/zP49+3v0Jo7Wat7vE/vN186+tDazdrdd/6vr/b+Petrx+ydpO+v0z/2vaMnSO2Hn9bUvv/tN73a/A/Jvb+9KHzx0Drfd9S6lk5Wv/bPldI2/c/dr/8h2pA8T8Nc/R/2/eFl93vHEXi4k2H/5r85z53PFZzbMcW17/b9yVn3e/wX5P/3OeOa54zbb+buN9P+rkm/qcjlmPk1Bv3a46H7vlK7l9fHOSQ8rdNbSLUGxP4AwAAAAAAAAAAAAAAAAAAAAAAAAAAAACAOfkJHz4H/gAAAQA=
  </data>
  <tileproperties/>
 </layer>
 <layer name="Fringe" width="128" height="128">
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAAO3ZwQkAIAgF0OZohPYfsAU8GEFkvXe0m6CQvzUAAAAAAAAAAAAAAAAAAAAAgHeNzXcAAABq8P+7R9Rr/Yc7ZWfTDAMAEOnJGgAAALXJ/wAAAP4g/wOAmtxrAVgl/wOoy74GAFbI/wAAAP4g/wMAAAAAAAAAAAAAAAAAAAAAAAAAAOCECcTTfqQAAAEA
  </data>
  <tileproperties/>
 </layer>
 <layer name="Over" width="128" height="128">
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAAO3dQQ6CMBAAQK76AfX/H1UOBCSALWKp3ZmEG4kk2zbbsitdBwAAAAAAAAAAAAAAAAAAAKPb63ok3ndPvBcAAABo03A+UOqMoPTvke7SjbERn7qlnv8BALSmz4OuZz8EUMz0DCHC3J/vy/dcLewVh7hHiHkEueNa3AEAAOA/qP8BAAAAAIC2qNWH403fqXmvFsvSmjrUVX8aB9bjtvXjYG0MiH0Maz0WNcR+T19TDc9NPuvNd7bWcgAAAAAAAACA2qkdgZjMfaJT+8cR34BQQw3A3C9zjL3/+Sr3Lyu1bzTV0veapnnMVm+iPOU8S7lm7rxNiV/NvYm8y9l/iB8AAAAAAAAAAAAAAHCmJ8V7F/QAAAEA
  </data>
  <tileproperties/>
 </layer>
 <layer name="Collision" width="128" height="128" opacity="0.42">
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAAO3S0Y7kIAxE0Xz7fPmqH1ZqtXBijKEwuSUd7aonBOLi77quPwAAAAAAAAAAAAAAAAAAAAAAAAAAAACv54n3ue/nV51VPb/KrPT2bb1j1T2N3OmVZ9+V9d098/E+N7P/GVF3c0L/v8/S/16sb+6ZTWZm9v/0jt+/q7tR9K/OTmdVd0P/9E//9E//9E//e53lFLMS3Sd61hnfpe7mpP69+87s3/MO71lO0ZpBxr0Y2XtW/71Rd3Ny/5F1PftlRN3NTv17Z/r39S/97+/u20dC/zXMSvX+1b3QP/3T/9r+1V1UFZ1l75q7jPSvnl91kZlayeof9A/6B/2D/nFO/631PXel96zI79/T4UinPVHPr7rITK3M7j9y77B//yN3RT2/6iIztZLVf89dUM+vushMv5/zrrvLSP+e82JO/z3r7jKyznNenNm/97zI7b+1LnpnntZ6op5hZZF5WqH/eiLztEL/ehmh/3p6E+2R/veTHfqvY0Z27d96j7qDt/Xf2nfGnfF+n7qDt/UfWdezxnouet6T9czEmx37HznvySLzuK74WvrfS3QeI3O00vu8taY36g4q9p+9592+d1HPrzrFTK1kPY+xPnba8y7quZ1i9WytZPXvjXruu1g9H+9+T/G+33qXeu67eEr1/ld9V1Wr5+V5/8h5vv++4nuqimZ2/6PnWPUd1WWE/uvKzOjekfPQ/9z+Z80yK6PvVc9fLTP0X09mVPuORD1/tczQfz2Zof96MlOt+0/U81fLDP3XkzG31m8Vuv9EPX+1jLm1fqP7GjJm1/pt9+4/Uc9+B5np3WPmvXjaXz33XWRmxR7Rszz9/c2y4nn/ivvg+Ub1zN9kdawztP6Pc/q3ur1+fm89g/r9/09r/99zqGfyNjMS3UM9izfLSHQf9bdj7E6ozwkAAAAAAAAAAAAAAAAAAAAAAN7tH3vzGRUAAAEA
  </data>
  <tileproperties/>
 </layer>
 <objectgroup name="Object Group 1" width="0" height="0">
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1280" y="1440" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1600" y="1440" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1920" y="1376" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2080" y="1376" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1920" y="1600" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2080" y="1600" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1920" y="1824" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2080" y="1824" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1920" y="2048" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2080" y="2048" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1920" y="2272" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2080" y="2272" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1920" y="2496" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2080" y="2496" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1920" y="2720" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2080" y="2720" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1440" y="2176" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="1440" y="2368" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2848" y="1120" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="3104" y="1120" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="2848" y="1344" width="32" height="32">
   <properties/>
  </object>
  <object name="graphics/particles/flame.particle.xml" type="PARTICLE_EFFECT" x="3104" y="1344" width="32" height="32">
   <properties/>
  </object>
  <object name="Naem the Miner" type="NPC" x="1040" y="3024" width="0" height="0">
   <properties>
    <property name="SCRIPT">
     function npc_handler(npc, ch)
       do_message(npc, ch, "Do you want me to lift you to the upper level?")
       local v = do_choice(npc, ch, "Sure", "Not yet!")
       if v == 1 then
         tmw.chr_warp(ch, 2, 87 * 32 + 16, 99 * 32 + 16)
       end
     end
    </property>
    <property name="NPC_ID">
     109
    </property>
   </properties>
  </object>
  <object name="Chest" type="NPC" x="2976" y="1184" width="0" height="0">
   <properties>
    <property name="SCRIPT">
     function npc_handler(npc, ch)
       local g = tonumber(get_quest_var(npc, ch, "005_chest"))
       if not g then
         do_message(npc, ch, "Would you try to open it?")
         local v = do_choice(npc, ch, "Yup", "Nope")
         if v == 1 then
           if tmw.chr_inv_change(ch, 537, -3, 536, 1) then
             do_message(npc, ch, "You opened it and found a short sword!")
             tmw.chr_set_quest(ch, "005_chest", 1)
           else
             do_message(npc, ch, "It seems that this is not the right key...")   
           end
         end
       else
         do_message(npc, ch, "You already opened this chest.")
       end
     end
    </property>
    <property name="NPC_ID">
     111
    </property>
   </properties>
  </object>
  <object name="Spider" type="SPAWN" x="0" y="0" width="0" height="0">
   <properties>
    <property name="SPAWN_RATE">
     10
    </property>
    <property name="MONSTER_ID">
     1012
    </property>
    <property name="MAX_BEINGS">
     20
    </property>
   </properties>
  </object>
  <object name="Spider" type="SPAWN" x="0" y="0" width="0" height="0">
   <properties>
    <property name="SPAWN_RATE">
     10
    </property>
    <property name="MONSTER_ID">
     1007
    </property>
    <property name="MAX_BEINGS">
     25
    </property>
   </properties>
  </object>
 </objectgroup>
</map>
